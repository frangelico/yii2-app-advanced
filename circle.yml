## Customize the test machine
machine:

  timezone:
    America/Los_Angeles # Set the timezone

  hosts:
    localhost: 127.0.0.1

  php:
    version: 5.4.5


#  environment:    
#    DATABASE_URL: mysql://ubuntu:@127.0.0.1:3306/circle_test

dependencies:
    pre:
#      - apt-get install php5-gd
      - echo "extension = gd2.so" >> ~/.phpenv/versions/$(phpenv global)/etc/conf.d/php.ini

checkout:
  post:
    - ./init --env=Development --overwrite=y
    - chmod 0755 frontend/tests/unit/yii

database:
#  override:
#    - mysql -u ubuntu yii2_advanced_unit < my-database-setup.sql
  post:
    - frontend/tests/unit/yii migrate 0 --interactive=0


test:
  post:
    - cd frontend && ../vendor/bin/codecept build && ../vendor/bin/codecept run unit
    - cd frontend && ../vendor/bin/codecept build && ../vendor/bin/codecept run functional
    - cd frontend && ../vendor/bin/codecept build && ../vendor/bin/codecept run acceptance
